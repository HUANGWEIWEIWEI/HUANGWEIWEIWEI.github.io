<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>17.dignifiedfilm开发经验 | FE Note</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/avater.jpg">
    <meta name="description" content="持续更新的前端学习笔记">
    <link rel="preload" href="/assets/css/0.styles.1f6703fb.css" as="style"><link rel="preload" href="/assets/js/app.7cfd3afd.js" as="script"><link rel="preload" href="/assets/js/2.7c2e0a4d.js" as="script"><link rel="preload" href="/assets/js/121.982b9b7b.js" as="script"><link rel="preload" href="/assets/js/5.bf8043b7.js" as="script"><link rel="prefetch" href="/assets/js/10.a199202b.js"><link rel="prefetch" href="/assets/js/100.973d1ec8.js"><link rel="prefetch" href="/assets/js/101.b90a93b7.js"><link rel="prefetch" href="/assets/js/102.98ac1f0c.js"><link rel="prefetch" href="/assets/js/103.d9c215a7.js"><link rel="prefetch" href="/assets/js/104.5d65fbc4.js"><link rel="prefetch" href="/assets/js/105.bef8cee6.js"><link rel="prefetch" href="/assets/js/106.8137498e.js"><link rel="prefetch" href="/assets/js/107.9a2d8d32.js"><link rel="prefetch" href="/assets/js/108.91221e7a.js"><link rel="prefetch" href="/assets/js/109.74935341.js"><link rel="prefetch" href="/assets/js/11.05cffb54.js"><link rel="prefetch" href="/assets/js/110.bf26cbb0.js"><link rel="prefetch" href="/assets/js/111.42631527.js"><link rel="prefetch" href="/assets/js/112.f23920e3.js"><link rel="prefetch" href="/assets/js/113.e8287c5e.js"><link rel="prefetch" href="/assets/js/114.2329100e.js"><link rel="prefetch" href="/assets/js/115.4bec32d8.js"><link rel="prefetch" href="/assets/js/116.7154ce05.js"><link rel="prefetch" href="/assets/js/117.fbf691f9.js"><link rel="prefetch" href="/assets/js/118.5a34128f.js"><link rel="prefetch" href="/assets/js/119.379e4cb6.js"><link rel="prefetch" href="/assets/js/12.bd400654.js"><link rel="prefetch" href="/assets/js/120.598e648b.js"><link rel="prefetch" href="/assets/js/122.8eaec69e.js"><link rel="prefetch" href="/assets/js/123.33e552cb.js"><link rel="prefetch" href="/assets/js/124.a53b101e.js"><link rel="prefetch" href="/assets/js/125.69371d5d.js"><link rel="prefetch" href="/assets/js/126.03a8b253.js"><link rel="prefetch" href="/assets/js/127.d3ee57ee.js"><link rel="prefetch" href="/assets/js/128.6a3426b0.js"><link rel="prefetch" href="/assets/js/129.c7aaea2f.js"><link rel="prefetch" href="/assets/js/13.f5a78c38.js"><link rel="prefetch" href="/assets/js/130.c40b9f00.js"><link rel="prefetch" href="/assets/js/131.47e56597.js"><link rel="prefetch" href="/assets/js/132.853618fc.js"><link rel="prefetch" href="/assets/js/133.745244a8.js"><link rel="prefetch" href="/assets/js/134.df063492.js"><link rel="prefetch" href="/assets/js/135.bf073385.js"><link rel="prefetch" href="/assets/js/136.da6fc2af.js"><link rel="prefetch" href="/assets/js/137.4340c29e.js"><link rel="prefetch" href="/assets/js/138.bcb0c951.js"><link rel="prefetch" href="/assets/js/139.248d092e.js"><link rel="prefetch" href="/assets/js/14.ac1d06ab.js"><link rel="prefetch" href="/assets/js/140.92ea591d.js"><link rel="prefetch" href="/assets/js/141.596f87e5.js"><link rel="prefetch" href="/assets/js/15.ecedfca9.js"><link rel="prefetch" href="/assets/js/16.ee8fa0aa.js"><link rel="prefetch" href="/assets/js/17.67df96c4.js"><link rel="prefetch" href="/assets/js/18.4ab8d709.js"><link rel="prefetch" href="/assets/js/19.9ba3846e.js"><link rel="prefetch" href="/assets/js/20.d8fc77f6.js"><link rel="prefetch" href="/assets/js/21.159f491c.js"><link rel="prefetch" href="/assets/js/22.6d53e019.js"><link rel="prefetch" href="/assets/js/23.c88a646f.js"><link rel="prefetch" href="/assets/js/24.81f5a0c5.js"><link rel="prefetch" href="/assets/js/25.b1d65cf7.js"><link rel="prefetch" href="/assets/js/26.190f5736.js"><link rel="prefetch" href="/assets/js/27.6c00da31.js"><link rel="prefetch" href="/assets/js/28.6aee56fe.js"><link rel="prefetch" href="/assets/js/29.4c49b541.js"><link rel="prefetch" href="/assets/js/3.5e85fdcc.js"><link rel="prefetch" href="/assets/js/30.46ad2c22.js"><link rel="prefetch" href="/assets/js/31.dbbbf982.js"><link rel="prefetch" href="/assets/js/32.5da420f8.js"><link rel="prefetch" href="/assets/js/33.5b6ab24d.js"><link rel="prefetch" href="/assets/js/34.23208694.js"><link rel="prefetch" href="/assets/js/35.c6f53d20.js"><link rel="prefetch" href="/assets/js/36.c18b4f91.js"><link rel="prefetch" href="/assets/js/37.e7b8b9ff.js"><link rel="prefetch" href="/assets/js/38.be4a3f12.js"><link rel="prefetch" href="/assets/js/39.7040e244.js"><link rel="prefetch" href="/assets/js/4.214c66dd.js"><link rel="prefetch" href="/assets/js/40.91851cc6.js"><link rel="prefetch" href="/assets/js/41.112012b0.js"><link rel="prefetch" href="/assets/js/42.fe20d2f5.js"><link rel="prefetch" href="/assets/js/43.6d27b363.js"><link rel="prefetch" href="/assets/js/44.8352cc33.js"><link rel="prefetch" href="/assets/js/45.ab0bc7de.js"><link rel="prefetch" href="/assets/js/46.16bfc8d2.js"><link rel="prefetch" href="/assets/js/47.762e7926.js"><link rel="prefetch" href="/assets/js/48.4e3fb577.js"><link rel="prefetch" href="/assets/js/49.d39d6217.js"><link rel="prefetch" href="/assets/js/50.29e9f8d1.js"><link rel="prefetch" href="/assets/js/51.6095d6bd.js"><link rel="prefetch" href="/assets/js/52.df8225fd.js"><link rel="prefetch" href="/assets/js/53.bcde160c.js"><link rel="prefetch" href="/assets/js/54.30cb1212.js"><link rel="prefetch" href="/assets/js/55.3ec7d6c7.js"><link rel="prefetch" href="/assets/js/56.e3e525f5.js"><link rel="prefetch" href="/assets/js/57.39f005f2.js"><link rel="prefetch" href="/assets/js/58.d69af7e0.js"><link rel="prefetch" href="/assets/js/59.a352d3a0.js"><link rel="prefetch" href="/assets/js/6.b7c61ba1.js"><link rel="prefetch" href="/assets/js/60.de7b9265.js"><link rel="prefetch" href="/assets/js/61.433c57ff.js"><link rel="prefetch" href="/assets/js/62.8dfb2c78.js"><link rel="prefetch" href="/assets/js/63.4d90d359.js"><link rel="prefetch" href="/assets/js/64.e7f370d9.js"><link rel="prefetch" href="/assets/js/65.9c71852f.js"><link rel="prefetch" href="/assets/js/66.eba29aba.js"><link rel="prefetch" href="/assets/js/67.a6c462bf.js"><link rel="prefetch" href="/assets/js/68.a54fecea.js"><link rel="prefetch" href="/assets/js/69.260ede44.js"><link rel="prefetch" href="/assets/js/7.499bf40e.js"><link rel="prefetch" href="/assets/js/70.ed02f564.js"><link rel="prefetch" href="/assets/js/71.835fd3be.js"><link rel="prefetch" href="/assets/js/72.dbab8cc7.js"><link rel="prefetch" href="/assets/js/73.80924fab.js"><link rel="prefetch" href="/assets/js/74.ede54dd0.js"><link rel="prefetch" href="/assets/js/75.4d0e9dd3.js"><link rel="prefetch" href="/assets/js/76.311c4ab7.js"><link rel="prefetch" href="/assets/js/77.2f189c53.js"><link rel="prefetch" href="/assets/js/78.e4a2d6f5.js"><link rel="prefetch" href="/assets/js/79.19b5e848.js"><link rel="prefetch" href="/assets/js/8.3525ff20.js"><link rel="prefetch" href="/assets/js/80.5ad884ee.js"><link rel="prefetch" href="/assets/js/81.555bb3aa.js"><link rel="prefetch" href="/assets/js/82.24bd7c19.js"><link rel="prefetch" href="/assets/js/83.2af9cde1.js"><link rel="prefetch" href="/assets/js/84.9361ff2b.js"><link rel="prefetch" href="/assets/js/85.b3ba2103.js"><link rel="prefetch" href="/assets/js/86.8de2f7bc.js"><link rel="prefetch" href="/assets/js/87.0467f1e3.js"><link rel="prefetch" href="/assets/js/88.4f7266c8.js"><link rel="prefetch" href="/assets/js/89.7de85c62.js"><link rel="prefetch" href="/assets/js/9.b0e8a85f.js"><link rel="prefetch" href="/assets/js/90.547a7230.js"><link rel="prefetch" href="/assets/js/91.cba95ce0.js"><link rel="prefetch" href="/assets/js/92.48eb37c8.js"><link rel="prefetch" href="/assets/js/93.2c0a2097.js"><link rel="prefetch" href="/assets/js/94.79de61d2.js"><link rel="prefetch" href="/assets/js/95.9ceca60f.js"><link rel="prefetch" href="/assets/js/96.fab3711b.js"><link rel="prefetch" href="/assets/js/97.ec3690c4.js"><link rel="prefetch" href="/assets/js/98.11585efa.js"><link rel="prefetch" href="/assets/js/99.ae7a2943.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1f6703fb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/avater.jpg" alt="FE Note" class="logo"> <span class="site-name can-hide">FE Note</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/01html相关/1.HTML、HTML5概述.html" class="nav-link">
  HTML/5
</a></div><div class="nav-item"><a href="/02css相关/1.CSS、CSS3概述.html" class="nav-link">
  CSS/3
</a></div><div class="nav-item"><a href="/03js相关/01JS概述.html" class="nav-link">
  JS/ES6
</a></div><div class="nav-item"><a href="/04vue/01Vue概述.html" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/05node/1.Node.js概述.html" class="nav-link">
  NodeJS
</a></div><div class="nav-item"><a href="/06数据库/1.数据库概述.html" class="nav-link">
  数据库
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="四大必修" class="dropdown-title"><span class="title">四大必修</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/07数据结构/01数据结构概述.html" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/08算法/01算法.html" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/09计算机网络和浏览器/1.计算机网络.html" class="nav-link">
  计算机网络和浏览器
</a></li><li class="dropdown-item"><!----> <a href="/10操作系统/1.操作系统（基础）.html" class="nav-link">
  操作系统
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="OTHER" class="dropdown-title"><span class="title">OTHER</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/11小程序/01小程序概述.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/12前端工程化/01前端工程化概述.html" class="nav-link">
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/13前端安全/01前端安全概述.html" class="nav-link">
  前端安全
</a></li><li class="dropdown-item"><!----> <a href="/14VS-Code/0.vscode相关.html" class="nav-link">
  VS Code
</a></li><li class="dropdown-item"><!----> <a href="/15Chrome/01chrome概述.html" class="nav-link">
  Chrome
</a></li><li class="dropdown-item"><!----> <a href="/16Git/1.git概述.html" class="nav-link">
  Git相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tips" class="dropdown-title"><span class="title">Tips</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/17生词本/1.学习中遇到的生词.html" class="nav-link">
  生词本
</a></li><li class="dropdown-item"><!----> <a href="/19书籍阅读/0书籍汇总.html" class="nav-link">
  书籍阅读
</a></li><li class="dropdown-item"><!----> <a href="/20项目/0项目汇总.html" class="nav-link">
  项目
</a></li></ul></div></div><div class="nav-item"><a href="/18实战问题/0.实战中遇到的问题归纳.html" class="nav-link">
  实战问题
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/01html相关/1.HTML、HTML5概述.html" class="nav-link">
  HTML/5
</a></div><div class="nav-item"><a href="/02css相关/1.CSS、CSS3概述.html" class="nav-link">
  CSS/3
</a></div><div class="nav-item"><a href="/03js相关/01JS概述.html" class="nav-link">
  JS/ES6
</a></div><div class="nav-item"><a href="/04vue/01Vue概述.html" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/05node/1.Node.js概述.html" class="nav-link">
  NodeJS
</a></div><div class="nav-item"><a href="/06数据库/1.数据库概述.html" class="nav-link">
  数据库
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="四大必修" class="dropdown-title"><span class="title">四大必修</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/07数据结构/01数据结构概述.html" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/08算法/01算法.html" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/09计算机网络和浏览器/1.计算机网络.html" class="nav-link">
  计算机网络和浏览器
</a></li><li class="dropdown-item"><!----> <a href="/10操作系统/1.操作系统（基础）.html" class="nav-link">
  操作系统
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="OTHER" class="dropdown-title"><span class="title">OTHER</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/11小程序/01小程序概述.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/12前端工程化/01前端工程化概述.html" class="nav-link">
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/13前端安全/01前端安全概述.html" class="nav-link">
  前端安全
</a></li><li class="dropdown-item"><!----> <a href="/14VS-Code/0.vscode相关.html" class="nav-link">
  VS Code
</a></li><li class="dropdown-item"><!----> <a href="/15Chrome/01chrome概述.html" class="nav-link">
  Chrome
</a></li><li class="dropdown-item"><!----> <a href="/16Git/1.git概述.html" class="nav-link">
  Git相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tips" class="dropdown-title"><span class="title">Tips</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/17生词本/1.学习中遇到的生词.html" class="nav-link">
  生词本
</a></li><li class="dropdown-item"><!----> <a href="/19书籍阅读/0书籍汇总.html" class="nav-link">
  书籍阅读
</a></li><li class="dropdown-item"><!----> <a href="/20项目/0项目汇总.html" class="nav-link">
  项目
</a></li></ul></div></div><div class="nav-item"><a href="/18实战问题/0.实战中遇到的问题归纳.html" class="nav-link">
  实战问题
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/18实战问题/0.实战中遇到的问题归纳.html" class="sidebar-link">0.实战中遇到的问题归纳</a></li><li><a href="/18实战问题/1.mac显示项目树：tree命令.html" class="sidebar-link">1.mac显示项目树：tree命令</a></li><li><a href="/18实战问题/2.语法糖.html" class="sidebar-link">2.语法糖</a></li><li><a href="/18实战问题/3.软件发行版本分类.html" class="sidebar-link">3.软件发行版本分类</a></li><li><a href="/18实战问题/4.strapi.html" class="sidebar-link">4.strapi</a></li><li><a href="/18实战问题/5.系统用户权限不足问题.html" class="sidebar-link">5.系统用户权限问题</a></li><li><a href="/18实战问题/6.RESTful.html" class="sidebar-link">6.RESTful</a></li><li><a href="/18实战问题/7.一台服务器部署多个Web项目.html" class="sidebar-link">7.一台服务器部署多个Web项目</a></li><li><a href="/18实战问题/8.各种报错.html" class="sidebar-link">8.遇过的报错</a></li><li><a href="/18实战问题/9.Browsersync网页自动刷新.html" class="sidebar-link">9.实时预览</a></li><li><a href="/18实战问题/10.爬取掘金、简书、CSDN上的markdown文章.html" class="sidebar-link">10.爬取掘金、简书、CSDN上的markdown文章</a></li><li><a href="/18实战问题/11.gitalk.html" class="sidebar-link">11.添加Gitalk评论插件到博客</a></li><li><a href="/18实战问题/12.绑定自己的域名到gitpages.html" class="sidebar-link">12.绑定自己的域名到gitpage,并强制使用HTTPS</a></li><li><a href="/18实战问题/13.MongoDB在Mac上连不上.html" class="sidebar-link">13.MongoDB在Mac上连不上.md</a></li><li><a href="/18实战问题/14.hexo博客搭建.html" class="sidebar-link">14. hexo博客搭建.md</a></li><li><a href="/18实战问题/15.IEEE754.html" class="sidebar-link">15.IEEE 754</a></li><li><a href="/18实战问题/16.postman.html" class="sidebar-link">16.postman</a></li><li><a href="/18实战问题/17.dignifiedfilm开发经验.html" class="active sidebar-link">17.dignifiedfilm开发经验</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/18实战问题/17.dignifiedfilm开发经验.html#_1-初始化项目" class="sidebar-link">1.初始化项目</a></li><li class="sidebar-sub-header"><a href="/18实战问题/17.dignifiedfilm开发经验.html#_2-启动服务" class="sidebar-link">2.启动服务</a></li><li class="sidebar-sub-header"><a href="/18实战问题/17.dignifiedfilm开发经验.html#_3-建项目的数据库模块" class="sidebar-link">3.建项目的数据库模块</a></li><li class="sidebar-sub-header"><a href="/18实战问题/17.dignifiedfilm开发经验.html#_4-连接数据库" class="sidebar-link">4.连接数据库</a></li><li class="sidebar-sub-header"><a href="/18实战问题/17.dignifiedfilm开发经验.html#_5-写数据库模型" class="sidebar-link">5.写数据库模型</a></li><li class="sidebar-sub-header"><a href="/18实战问题/17.dignifiedfilm开发经验.html#_6-使用crud装饰器实现增删改查接口" class="sidebar-link">6.使用crud装饰器实现增删改查接口</a></li><li class="sidebar-sub-header"><a href="/18实战问题/17.dignifiedfilm开发经验.html#_7-使用swagger和装饰器编写接口文档" class="sidebar-link">7.使用swagger和装饰器编写接口文档</a></li><li class="sidebar-sub-header"><a href="/18实战问题/17.dignifiedfilm开发经验.html#_8-在typegoose中定义课程和课时的一对多关联" class="sidebar-link">8.在Typegoose中定义课程和课时的一对多关联</a></li><li class="sidebar-sub-header"><a href="/18实战问题/17.dignifiedfilm开发经验.html#_9-使用typescript-elementui搭建后台界面" class="sidebar-link">9.使用Typescript+ElementUI搭建后台界面</a></li></ul></li><li><a href="/18实战问题/18.Mac终端相关问题.html" class="sidebar-link">18.Mac终端相关问题</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_17-dignifiedfilm开发经验"><a href="#_17-dignifiedfilm开发经验" class="header-anchor">#</a> 17.dignifiedfilm开发经验</h1> <h2 id="_1-初始化项目"><a href="#_1-初始化项目" class="header-anchor">#</a> 1.初始化项目</h2> <p>git clone 一个初始项目到本地</p> <ul><li>开发一个项目先从服务端和数据库开始</li></ul> <p>全局安装nest命令，再用nest初始化一个项目</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>yarn global add @nestjs/cli
nest new project-name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><a href="https://docs.nestjs.com/" target="_blank" rel="https://dignified.cn">nest官文<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813130945.png" alt=""></p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813131124.png" alt=""></p> <ul><li>服务端分为两个：给管理端用的和给客户端用的接口</li></ul> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813131336.png" alt=""></p> <p>使用nest的monorepo单体仓库模式。可以把多个服务端放到这个仓库中。</p> <ul><li>管理端要增删改查的接口。客户端要查的接口。但他们都用同一个数据库。数据模型也一样。</li></ul> <p>在server里创建一个名为admin的子项目</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cd server
nest g app admin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>项目目录结构：</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813132207.png" alt=""></p> <h2 id="_2-启动服务"><a href="#_2-启动服务" class="header-anchor">#</a> 2.启动服务</h2> <ul><li>在分成了子项目模式之后，启动子项目这样写</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>nest start -w admin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>-w是watch，监听变化，自动重启</li></ul> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813133154.png" alt=""></p> <p>改监听到3001端口，控制台打印出来</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813133546.png" alt=""></p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813133623.png" alt=""></p> <h2 id="_3-建项目的数据库模块"><a href="#_3-建项目的数据库模块" class="header-anchor">#</a> 3.建项目的数据库模块</h2> <p>新建个终端，创建一个db库，它是一个公用模块</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cd server
nest g lib db
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>默认前缀是@app，不好记，换成@libs</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813134143.png" alt=""></p> <p>这个数据库模块独立于两个子项目，后面引用就行。</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813134450.png" alt=""></p> <h2 id="_4-连接数据库"><a href="#_4-连接数据库" class="header-anchor">#</a> 4.连接数据库</h2> <p>安装nest数据库模块</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>yarn add nestjs-typegoose @typegoose/typegoose
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>typegoose更适合ts的项目，以后都不会用mongoose</p></li> <li><p>nestjs-typegoose这个包是在nest使用，@typegoose/typegoose这个包是基于ts的一个封装</p></li></ul> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813135327.png" alt=""></p> <p>在db.module.ts里面写连接</p> <ul><li>先安装这个才有提示</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>yarn add mongoose @types/mongoose
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>mongoose是连接数据库的模块，@types/mongoose表示在ts里面针对mongoose的一些类型定义的提示</li></ul> <p>用TypegooseModule.forRoot去连接数据库，传一些参数防报错</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813140723.png" alt=""></p> <p>关掉再重启服务</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>nest start -w admin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果出现<code>MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017</code>说明mongodb数据库没开，node下<code>sudo mongod</code>开启即可</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813142537.png" alt=""></p> <p>此时已创建并连接到了dignifiedfilm数据库</p> <h2 id="_5-写数据库模型"><a href="#_5-写数据库模型" class="header-anchor">#</a> 5.写数据库模型</h2> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813143317.png" alt=""></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//引用模块</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>prop<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@typegoose/typegoose'</span><span class="token punctuation">;</span>

<span class="token comment">//导出一个用户的类User</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">{</span>
    <span class="token comment">//@prop()用来装饰它的属性</span>
    @<span class="token function">prop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    username<span class="token operator">:</span>string

    @<span class="token function">prop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    password<span class="token operator">:</span>string
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>模型定义好后，可以在需要的地方使用这个模型</li></ul> <p>也可以直接全局引用：</p> <ul><li><p>@Global()标记为全局</p></li> <li><p>导入这些模型再导出这些模型</p></li></ul> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813144600.png" alt=""></p> <ul><li>现在在admin里就可以直接使用了</li></ul> <h2 id="_6-使用crud装饰器实现增删改查接口"><a href="#_6-使用crud装饰器实现增删改查接口" class="header-anchor">#</a> 6.使用crud装饰器实现增删改查接口</h2> <ul><li>不会把用户相关的东西写在app层级，所以在子项目里创建一个模块</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>nest g mo -p admin users
nest g co -p admin users
yarn add nestjs-mongoose-crud
yarn add @nestjs/swagger swagger-ui-express
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>-p admin表示是在admin这个project里面添加users模块</li> <li>co是控制器模块</li> <li>nestjs-mongoose-crud模块可以用一行代码实现增删改查接口</li> <li>官方的包@nestjs/swagger，写文档要用到。第三方的包swagger-ui-express 基于express的swagger</li></ul> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813145748.png" alt=""></p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813151831.png" alt=""></p> <p>users.controller.ts里写</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Controller <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nestjs/common'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> InjectModel <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'nestjs-typegoose'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>User<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@libs/db/models/user.model'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Crud<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'nestjs-mongoose-crud'</span><span class="token punctuation">;</span>

@<span class="token function">Crud</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">//传递一个模型User</span>
    model<span class="token operator">:</span>User
<span class="token punctuation">}</span><span class="token punctuation">)</span>
@<span class="token function">Controller</span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">UsersController</span> <span class="token punctuation">{</span>
    <span class="token comment">//注入模型，模型类User，注入给自己的属性上，只读的，</span>
    <span class="token comment">//后面名字必须是model，这是crud模块规定的</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">@<span class="token function">InjectModel</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span> <span class="token keyword">private</span> readonly model</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813151947.png" alt=""></p> <p>这样就完成了用户的增删改查</p> <h2 id="_7-使用swagger和装饰器编写接口文档"><a href="#_7-使用swagger和装饰器编写接口文档" class="header-anchor">#</a> 7.使用swagger和装饰器编写接口文档</h2> <p>请求接口 localhost:3001/users</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813152719.png" alt=""></p> <p>把官方文档OpenAPI (Swagger)的代码拷过过来</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813154657.png" alt=""></p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813155124.png" alt=""></p> <ul><li>接口文档的地址习惯叫api-docs</li></ul> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813155418.png" alt=""></p> <p>进入localhost:3001/api-docs/</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813155559.png" alt=""></p> <ul><li>这里有增删改查5个接口</li></ul> <p>改界面</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813160259.png" alt=""></p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813160343.png" alt=""></p> <p>每一个模块都建议在控制器里面加一个标签分组</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813161301.png" alt=""></p> <p>这样User的所有增删改查都会被分到“用户”组里面去</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813161355.png" alt=""></p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813164606.png" alt=""></p> <p>描述一下模型的定义：</p> <p>user.model.ts</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>prop<span class="token punctuation">,</span> ModelOptions<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@typegoose/typegoose'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ApiProperty <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nestjs/swagger'</span><span class="token punctuation">;</span>

<span class="token comment">//ModelOptions可以定义这个模型的其他属性，</span>
@<span class="token function">ModelOptions</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">//schemaOptions 等同于mongoose里schema要传的参数</span>
    schemaOptions<span class="token operator">:</span><span class="token punctuation">{</span>
        timestamps<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">{</span>
    <span class="token comment">//@ApiProperty定义每一个属性的名字，example实例值</span>
    @<span class="token function">ApiProperty</span><span class="token punctuation">(</span><span class="token punctuation">{</span>description<span class="token operator">:</span><span class="token string">'用户名'</span><span class="token punctuation">,</span>example<span class="token operator">:</span><span class="token string">'user1'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    @<span class="token function">prop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    username<span class="token operator">:</span>string

    @<span class="token function">ApiProperty</span><span class="token punctuation">(</span><span class="token punctuation">{</span>description<span class="token operator">:</span><span class="token string">'密码'</span><span class="token punctuation">,</span>example<span class="token operator">:</span><span class="token string">'pass1'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    @<span class="token function">prop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    password<span class="token operator">:</span>string
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813164747.png" alt=""></p> <ul><li>所以做接口是最简单的，只要定义好模型，定义好模型有哪几个字段，然后在users.controller.ts里@Crud就可以了</li></ul> <h2 id="_8-在typegoose中定义课程和课时的一对多关联"><a href="#_8-在typegoose中定义课程和课时的一对多关联" class="header-anchor">#</a> 8.在Typegoose中定义课程和课时的一对多关联</h2> <p>用户管理完了还要做视频模块的管理</p> <ul><li>建立模型时，习惯性地，是单数；在建模块或者控制器时，是复数。</li> <li>因为在模型里，是在描述一个类，类不会取名为复数</li> <li>在控制器和模块里是管理了所有</li></ul> <p>course.model.ts</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>prop<span class="token punctuation">,</span> ModelOptions<span class="token punctuation">,</span> Ref<span class="token punctuation">,</span> arrayProp<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@typegoose/typegoose'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ApiProperty <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nestjs/swagger'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Episode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./episode.model'</span><span class="token punctuation">;</span>

@<span class="token function">ModelOptions</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    schemaOptions<span class="token operator">:</span><span class="token punctuation">{</span>
        timestamps<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Course</span><span class="token punctuation">{</span>
    @<span class="token function">ApiProperty</span><span class="token punctuation">(</span><span class="token punctuation">{</span>description<span class="token operator">:</span><span class="token string">'课程名称'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    @<span class="token function">prop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    name<span class="token operator">:</span>string

    @<span class="token function">ApiProperty</span><span class="token punctuation">(</span><span class="token punctuation">{</span>description<span class="token operator">:</span><span class="token string">'封面图'</span><span class="token punctuation">,</span>example<span class="token operator">:</span><span class="token string">'pass1'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    @<span class="token function">prop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    cover<span class="token operator">:</span>string

    @<span class="token function">arrayProp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>itemsRef<span class="token operator">:</span><span class="token string">'Episode'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    episodes<span class="token operator">:</span>Ref<span class="token operator">&lt;</span>Episode<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>episode.model.ts</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>prop<span class="token punctuation">,</span> modelOptions<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@typegoose/typegoose'</span><span class="token punctuation">;</span>

@<span class="token function">modelOptions</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    schemaOptions<span class="token operator">:</span><span class="token punctuation">{</span>
        timestamps<span class="token operator">:</span><span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Episode</span><span class="token punctuation">{</span>
    @<span class="token function">prop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    name<span class="token operator">:</span>string

    @<span class="token function">prop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    file<span class="token operator">:</span>string
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>两个模型定义和关联好后，加模块控制器，@crud</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>nest g mo -p admin courses
nest g co -p admin courses
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813173430.png" alt=""></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>:ReturnModelType&lt;typeof Course&gt;
定义它的类型，&lt;typeof Course&gt;是它的泛型
不写也可以，它只是一个类型的提示
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在数据库模块引入这两个模型
<img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813173714.png" alt=""></p> <p>给课时加模块控制器，@crud</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>nest g mo -p admin episodes
nest g co -p admin episodes
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813181826.png" alt=""></p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813181858.png" alt=""></p> <h2 id="_9-使用typescript-elementui搭建后台界面"><a href="#_9-使用typescript-elementui搭建后台界面" class="header-anchor">#</a> 9.使用Typescript+ElementUI搭建后台界面</h2> <p>跟server同级</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>vue create admin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200813211847.png" alt=""></p> <p><a href="https://cn.vuejs.org/v2/guide/typescript.html" target="_blank" rel="https://dignified.cn">vue3.0最好用ts开发<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>两种语法：Vue.extend或class...extend</p> <div class="gitalk-container"><div id="gitalk-container"></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/18实战问题/16.postman.html" class="prev">
        16.postman
      </a></span> <span class="next"><a href="/18实战问题/18.Mac终端相关问题.html">
        18.Mac终端相关问题
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7cfd3afd.js" defer></script><script src="/assets/js/2.7c2e0a4d.js" defer></script><script src="/assets/js/121.982b9b7b.js" defer></script><script src="/assets/js/5.bf8043b7.js" defer></script>
  </body>
</html>
