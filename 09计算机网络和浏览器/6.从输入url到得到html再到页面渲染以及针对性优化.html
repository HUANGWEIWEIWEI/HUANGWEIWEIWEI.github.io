<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>6.从输入url到得到html再到页面渲染以及针对性优化 | FE Note</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/avater.jpg">
    <meta name="description" content="持续更新的前端学习笔记">
    <link rel="preload" href="/assets/css/0.styles.1f6703fb.css" as="style"><link rel="preload" href="/assets/js/app.7cfd3afd.js" as="script"><link rel="preload" href="/assets/js/2.7c2e0a4d.js" as="script"><link rel="preload" href="/assets/js/72.dbab8cc7.js" as="script"><link rel="preload" href="/assets/js/5.bf8043b7.js" as="script"><link rel="prefetch" href="/assets/js/10.a199202b.js"><link rel="prefetch" href="/assets/js/100.973d1ec8.js"><link rel="prefetch" href="/assets/js/101.b90a93b7.js"><link rel="prefetch" href="/assets/js/102.98ac1f0c.js"><link rel="prefetch" href="/assets/js/103.d9c215a7.js"><link rel="prefetch" href="/assets/js/104.5d65fbc4.js"><link rel="prefetch" href="/assets/js/105.bef8cee6.js"><link rel="prefetch" href="/assets/js/106.8137498e.js"><link rel="prefetch" href="/assets/js/107.9a2d8d32.js"><link rel="prefetch" href="/assets/js/108.91221e7a.js"><link rel="prefetch" href="/assets/js/109.74935341.js"><link rel="prefetch" href="/assets/js/11.05cffb54.js"><link rel="prefetch" href="/assets/js/110.bf26cbb0.js"><link rel="prefetch" href="/assets/js/111.42631527.js"><link rel="prefetch" href="/assets/js/112.f23920e3.js"><link rel="prefetch" href="/assets/js/113.e8287c5e.js"><link rel="prefetch" href="/assets/js/114.2329100e.js"><link rel="prefetch" href="/assets/js/115.4bec32d8.js"><link rel="prefetch" href="/assets/js/116.7154ce05.js"><link rel="prefetch" href="/assets/js/117.fbf691f9.js"><link rel="prefetch" href="/assets/js/118.5a34128f.js"><link rel="prefetch" href="/assets/js/119.379e4cb6.js"><link rel="prefetch" href="/assets/js/12.bd400654.js"><link rel="prefetch" href="/assets/js/120.598e648b.js"><link rel="prefetch" href="/assets/js/121.982b9b7b.js"><link rel="prefetch" href="/assets/js/122.8eaec69e.js"><link rel="prefetch" href="/assets/js/123.33e552cb.js"><link rel="prefetch" href="/assets/js/124.a53b101e.js"><link rel="prefetch" href="/assets/js/125.69371d5d.js"><link rel="prefetch" href="/assets/js/126.03a8b253.js"><link rel="prefetch" href="/assets/js/127.d3ee57ee.js"><link rel="prefetch" href="/assets/js/128.6a3426b0.js"><link rel="prefetch" href="/assets/js/129.c7aaea2f.js"><link rel="prefetch" href="/assets/js/13.f5a78c38.js"><link rel="prefetch" href="/assets/js/130.c40b9f00.js"><link rel="prefetch" href="/assets/js/131.47e56597.js"><link rel="prefetch" href="/assets/js/132.853618fc.js"><link rel="prefetch" href="/assets/js/133.745244a8.js"><link rel="prefetch" href="/assets/js/134.df063492.js"><link rel="prefetch" href="/assets/js/135.bf073385.js"><link rel="prefetch" href="/assets/js/136.da6fc2af.js"><link rel="prefetch" href="/assets/js/137.4340c29e.js"><link rel="prefetch" href="/assets/js/138.bcb0c951.js"><link rel="prefetch" href="/assets/js/139.248d092e.js"><link rel="prefetch" href="/assets/js/14.ac1d06ab.js"><link rel="prefetch" href="/assets/js/140.92ea591d.js"><link rel="prefetch" href="/assets/js/141.596f87e5.js"><link rel="prefetch" href="/assets/js/15.ecedfca9.js"><link rel="prefetch" href="/assets/js/16.ee8fa0aa.js"><link rel="prefetch" href="/assets/js/17.67df96c4.js"><link rel="prefetch" href="/assets/js/18.4ab8d709.js"><link rel="prefetch" href="/assets/js/19.9ba3846e.js"><link rel="prefetch" href="/assets/js/20.d8fc77f6.js"><link rel="prefetch" href="/assets/js/21.159f491c.js"><link rel="prefetch" href="/assets/js/22.6d53e019.js"><link rel="prefetch" href="/assets/js/23.c88a646f.js"><link rel="prefetch" href="/assets/js/24.81f5a0c5.js"><link rel="prefetch" href="/assets/js/25.b1d65cf7.js"><link rel="prefetch" href="/assets/js/26.190f5736.js"><link rel="prefetch" href="/assets/js/27.6c00da31.js"><link rel="prefetch" href="/assets/js/28.6aee56fe.js"><link rel="prefetch" href="/assets/js/29.4c49b541.js"><link rel="prefetch" href="/assets/js/3.5e85fdcc.js"><link rel="prefetch" href="/assets/js/30.46ad2c22.js"><link rel="prefetch" href="/assets/js/31.dbbbf982.js"><link rel="prefetch" href="/assets/js/32.5da420f8.js"><link rel="prefetch" href="/assets/js/33.5b6ab24d.js"><link rel="prefetch" href="/assets/js/34.23208694.js"><link rel="prefetch" href="/assets/js/35.c6f53d20.js"><link rel="prefetch" href="/assets/js/36.c18b4f91.js"><link rel="prefetch" href="/assets/js/37.e7b8b9ff.js"><link rel="prefetch" href="/assets/js/38.be4a3f12.js"><link rel="prefetch" href="/assets/js/39.7040e244.js"><link rel="prefetch" href="/assets/js/4.214c66dd.js"><link rel="prefetch" href="/assets/js/40.91851cc6.js"><link rel="prefetch" href="/assets/js/41.112012b0.js"><link rel="prefetch" href="/assets/js/42.fe20d2f5.js"><link rel="prefetch" href="/assets/js/43.6d27b363.js"><link rel="prefetch" href="/assets/js/44.8352cc33.js"><link rel="prefetch" href="/assets/js/45.ab0bc7de.js"><link rel="prefetch" href="/assets/js/46.16bfc8d2.js"><link rel="prefetch" href="/assets/js/47.762e7926.js"><link rel="prefetch" href="/assets/js/48.4e3fb577.js"><link rel="prefetch" href="/assets/js/49.d39d6217.js"><link rel="prefetch" href="/assets/js/50.29e9f8d1.js"><link rel="prefetch" href="/assets/js/51.6095d6bd.js"><link rel="prefetch" href="/assets/js/52.df8225fd.js"><link rel="prefetch" href="/assets/js/53.bcde160c.js"><link rel="prefetch" href="/assets/js/54.30cb1212.js"><link rel="prefetch" href="/assets/js/55.3ec7d6c7.js"><link rel="prefetch" href="/assets/js/56.e3e525f5.js"><link rel="prefetch" href="/assets/js/57.39f005f2.js"><link rel="prefetch" href="/assets/js/58.d69af7e0.js"><link rel="prefetch" href="/assets/js/59.a352d3a0.js"><link rel="prefetch" href="/assets/js/6.b7c61ba1.js"><link rel="prefetch" href="/assets/js/60.de7b9265.js"><link rel="prefetch" href="/assets/js/61.433c57ff.js"><link rel="prefetch" href="/assets/js/62.8dfb2c78.js"><link rel="prefetch" href="/assets/js/63.4d90d359.js"><link rel="prefetch" href="/assets/js/64.e7f370d9.js"><link rel="prefetch" href="/assets/js/65.9c71852f.js"><link rel="prefetch" href="/assets/js/66.eba29aba.js"><link rel="prefetch" href="/assets/js/67.a6c462bf.js"><link rel="prefetch" href="/assets/js/68.a54fecea.js"><link rel="prefetch" href="/assets/js/69.260ede44.js"><link rel="prefetch" href="/assets/js/7.499bf40e.js"><link rel="prefetch" href="/assets/js/70.ed02f564.js"><link rel="prefetch" href="/assets/js/71.835fd3be.js"><link rel="prefetch" href="/assets/js/73.80924fab.js"><link rel="prefetch" href="/assets/js/74.ede54dd0.js"><link rel="prefetch" href="/assets/js/75.4d0e9dd3.js"><link rel="prefetch" href="/assets/js/76.311c4ab7.js"><link rel="prefetch" href="/assets/js/77.2f189c53.js"><link rel="prefetch" href="/assets/js/78.e4a2d6f5.js"><link rel="prefetch" href="/assets/js/79.19b5e848.js"><link rel="prefetch" href="/assets/js/8.3525ff20.js"><link rel="prefetch" href="/assets/js/80.5ad884ee.js"><link rel="prefetch" href="/assets/js/81.555bb3aa.js"><link rel="prefetch" href="/assets/js/82.24bd7c19.js"><link rel="prefetch" href="/assets/js/83.2af9cde1.js"><link rel="prefetch" href="/assets/js/84.9361ff2b.js"><link rel="prefetch" href="/assets/js/85.b3ba2103.js"><link rel="prefetch" href="/assets/js/86.8de2f7bc.js"><link rel="prefetch" href="/assets/js/87.0467f1e3.js"><link rel="prefetch" href="/assets/js/88.4f7266c8.js"><link rel="prefetch" href="/assets/js/89.7de85c62.js"><link rel="prefetch" href="/assets/js/9.b0e8a85f.js"><link rel="prefetch" href="/assets/js/90.547a7230.js"><link rel="prefetch" href="/assets/js/91.cba95ce0.js"><link rel="prefetch" href="/assets/js/92.48eb37c8.js"><link rel="prefetch" href="/assets/js/93.2c0a2097.js"><link rel="prefetch" href="/assets/js/94.79de61d2.js"><link rel="prefetch" href="/assets/js/95.9ceca60f.js"><link rel="prefetch" href="/assets/js/96.fab3711b.js"><link rel="prefetch" href="/assets/js/97.ec3690c4.js"><link rel="prefetch" href="/assets/js/98.11585efa.js"><link rel="prefetch" href="/assets/js/99.ae7a2943.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1f6703fb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/avater.jpg" alt="FE Note" class="logo"> <span class="site-name can-hide">FE Note</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/01html相关/1.HTML、HTML5概述.html" class="nav-link">
  HTML/5
</a></div><div class="nav-item"><a href="/02css相关/1.CSS、CSS3概述.html" class="nav-link">
  CSS/3
</a></div><div class="nav-item"><a href="/03js相关/01JS概述.html" class="nav-link">
  JS/ES6
</a></div><div class="nav-item"><a href="/04vue/01Vue概述.html" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/05node/1.Node.js概述.html" class="nav-link">
  NodeJS
</a></div><div class="nav-item"><a href="/06数据库/1.数据库概述.html" class="nav-link">
  数据库
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="四大必修" class="dropdown-title"><span class="title">四大必修</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/07数据结构/01数据结构概述.html" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/08算法/01算法.html" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/09计算机网络和浏览器/1.计算机网络.html" class="nav-link">
  计算机网络和浏览器
</a></li><li class="dropdown-item"><!----> <a href="/10操作系统/1.操作系统（基础）.html" class="nav-link">
  操作系统
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="OTHER" class="dropdown-title"><span class="title">OTHER</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/11小程序/01小程序概述.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/12前端工程化/01前端工程化概述.html" class="nav-link">
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/13前端安全/01前端安全概述.html" class="nav-link">
  前端安全
</a></li><li class="dropdown-item"><!----> <a href="/14VS-Code/0.vscode相关.html" class="nav-link">
  VS Code
</a></li><li class="dropdown-item"><!----> <a href="/15Chrome/01chrome概述.html" class="nav-link">
  Chrome
</a></li><li class="dropdown-item"><!----> <a href="/16Git/1.git概述.html" class="nav-link">
  Git相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tips" class="dropdown-title"><span class="title">Tips</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/17生词本/1.学习中遇到的生词.html" class="nav-link">
  生词本
</a></li><li class="dropdown-item"><!----> <a href="/19书籍阅读/0书籍汇总.html" class="nav-link">
  书籍阅读
</a></li><li class="dropdown-item"><!----> <a href="/20项目/0项目汇总.html" class="nav-link">
  项目
</a></li></ul></div></div><div class="nav-item"><a href="/18实战问题/0.实战中遇到的问题归纳.html" class="nav-link">
  实战问题
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/01html相关/1.HTML、HTML5概述.html" class="nav-link">
  HTML/5
</a></div><div class="nav-item"><a href="/02css相关/1.CSS、CSS3概述.html" class="nav-link">
  CSS/3
</a></div><div class="nav-item"><a href="/03js相关/01JS概述.html" class="nav-link">
  JS/ES6
</a></div><div class="nav-item"><a href="/04vue/01Vue概述.html" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/05node/1.Node.js概述.html" class="nav-link">
  NodeJS
</a></div><div class="nav-item"><a href="/06数据库/1.数据库概述.html" class="nav-link">
  数据库
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="四大必修" class="dropdown-title"><span class="title">四大必修</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/07数据结构/01数据结构概述.html" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/08算法/01算法.html" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/09计算机网络和浏览器/1.计算机网络.html" class="nav-link">
  计算机网络和浏览器
</a></li><li class="dropdown-item"><!----> <a href="/10操作系统/1.操作系统（基础）.html" class="nav-link">
  操作系统
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="OTHER" class="dropdown-title"><span class="title">OTHER</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/11小程序/01小程序概述.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/12前端工程化/01前端工程化概述.html" class="nav-link">
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/13前端安全/01前端安全概述.html" class="nav-link">
  前端安全
</a></li><li class="dropdown-item"><!----> <a href="/14VS-Code/0.vscode相关.html" class="nav-link">
  VS Code
</a></li><li class="dropdown-item"><!----> <a href="/15Chrome/01chrome概述.html" class="nav-link">
  Chrome
</a></li><li class="dropdown-item"><!----> <a href="/16Git/1.git概述.html" class="nav-link">
  Git相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tips" class="dropdown-title"><span class="title">Tips</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/17生词本/1.学习中遇到的生词.html" class="nav-link">
  生词本
</a></li><li class="dropdown-item"><!----> <a href="/19书籍阅读/0书籍汇总.html" class="nav-link">
  书籍阅读
</a></li><li class="dropdown-item"><!----> <a href="/20项目/0项目汇总.html" class="nav-link">
  项目
</a></li></ul></div></div><div class="nav-item"><a href="/18实战问题/0.实战中遇到的问题归纳.html" class="nav-link">
  实战问题
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/09计算机网络和浏览器/1.计算机网络.html" class="sidebar-link">1.计算机网络</a></li><li><a href="/09计算机网络和浏览器/2.OSI参考模型.html" class="sidebar-link">2.OSI参考模型</a></li><li><a href="/09计算机网络和浏览器/3.浏览器.html" class="sidebar-link">3.浏览器</a></li><li><a href="/09计算机网络和浏览器/4.http.html" class="sidebar-link">4.http</a></li><li><a href="/09计算机网络和浏览器/5.http1.x、https和2.0的区别.html" class="sidebar-link">5.http1.x、https和2.0的区别.md</a></li><li><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html" class="active sidebar-link">6.从输入url到得到html再到页面渲染以及针对性优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html#_1-从输入url到得到html的详细过程" class="sidebar-link">1. 从输入url到得到html的详细过程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html#_1-1-域名解析得到ip" class="sidebar-link">1.1. 域名解析得到IP</a></li><li class="sidebar-sub-header"><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html#_1-2-建立tcp链接（通过三次握手）" class="sidebar-link">1.2. 建立TCP链接（通过三次握手）</a></li><li class="sidebar-sub-header"><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html#_1-3-发送http请求" class="sidebar-link">1.3. 发送http请求</a></li><li class="sidebar-sub-header"><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html#_1-4-服务器处理http请求" class="sidebar-link">1.4. 服务器处理http请求</a></li><li class="sidebar-sub-header"><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html#_1-5-服务器返回响应结果" class="sidebar-link">1.5. 服务器返回响应结果</a></li><li class="sidebar-sub-header"><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html#_1-6-关闭tcp连接（通过四次挥手）" class="sidebar-link">1.6. 关闭TCP连接（通过四次挥手）</a></li></ul></li><li class="sidebar-sub-header"><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html#_2-html页面解析渲染过程" class="sidebar-link">2. HTML页面解析渲染过程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html#_2-1-解析html文件，创建dom树" class="sidebar-link">2.1. 解析html文件，创建DOM树</a></li><li class="sidebar-sub-header"><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html#_2-2-解析css，生成cssom，css对象模型" class="sidebar-link">2.2. 解析css，生成CSSOM，css对象模型</a></li><li class="sidebar-sub-header"><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html#_2-3-dom和css合并，构建渲染树（render-tree）" class="sidebar-link">2.3. dom和css合并，构建渲染树（Render Tree）</a></li><li class="sidebar-sub-header"><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html#_2-4-布局（layout）和绘制（paint），重绘（repaint）和重排（reflow-回流）" class="sidebar-link">2.4. 布局（Layout）和绘制（Paint），重绘（repaint）和重排（reflow/回流）</a></li></ul></li><li class="sidebar-sub-header"><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html#_3-从浏览器地址栏输入url到显示页面的步骤" class="sidebar-link">3. 从浏览器地址栏输入url到显示页面的步骤</a></li><li class="sidebar-sub-header"><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html#_4-window-onload和domcontentloaded的区别" class="sidebar-link">4. window.onload和DOMContentLoaded的区别</a></li><li class="sidebar-sub-header"><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html#_5-加载资源的形式" class="sidebar-link">5. 加载资源的形式</a></li><li class="sidebar-sub-header"><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html#_6-针对性优化" class="sidebar-link">6. 针对性优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html#_6-1-问题" class="sidebar-link">6.1. 问题</a></li><li class="sidebar-sub-header"><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html#_6-2-怎么做优化" class="sidebar-link">6.2. 怎么做优化</a></li></ul></li><li class="sidebar-sub-header"><a href="/09计算机网络和浏览器/6.从输入url到得到html再到页面渲染以及针对性优化.html#_7-参考文章" class="sidebar-link">7. 参考文章</a></li></ul></li><li><a href="/09计算机网络和浏览器/X.计算机网络和浏览器相关面试题.html" class="sidebar-link">X.计算机网络和浏览器相关面试题</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_6-从输入url到得到html再到页面渲染以及针对性优化"><a href="#_6-从输入url到得到html再到页面渲染以及针对性优化" class="header-anchor">#</a> 6.从输入url到得到html再到页面渲染以及针对性优化</h1> <p>相关或类似的题目</p> <div class="language-md line-numbers-mode"><pre class="language-md"><code>1、浏览器输入URL后发生了什么/从输入url到得到html的详细过程/加载一个资源的过程/3次握手4次挥手?
2、HTML页面渲染过程/浏览器渲染页面的过程?
3、window.onload和DOMContentLoaded的区别?
4、加载资源的形式?
5、浏览器主要组件?
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>题目详解</p> <div class="language-md line-numbers-mode"><pre class="language-md"><code>大致过程：url--&gt;客户端--&gt;DNS服务器--&gt;服务器--&gt;html--&gt;解析渲染
针对此过程提出优化
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr> <h2 id="_1-从输入url到得到html的详细过程"><a href="#_1-从输入url到得到html的详细过程" class="header-anchor">#</a> 1. 从输入url到得到html的详细过程</h2> <h3 id="_1-1-域名解析得到ip"><a href="#_1-1-域名解析得到ip" class="header-anchor">#</a> 1.1. 域名解析得到IP</h3> <p>浏览器开一个线程处理URL请求，同时在<strong>远程DNS服务器</strong>启动一个DNS查询，这使浏览器得到请求对应的IP地址</p> <blockquote><p>DNS（Domain Name Server，域名服务器）是进行域名(domain name)和与之相对应的IP地址 (IP address)转换的服务器。<br>
DNS中保存了一张域名(domain name)和与之相对应的IP地址 (IP address)的表，以解析消息的域名。<br>
域名是Internet上某一台计算机或计算机组的名称，用于在数据传输时标识计算机的电子方位（有时也指地理位置）。域名是由一串用点分隔的名字组成的，通常包含组织名，而且始终包括两到三个字母的后缀，以指明组织的类型或该域所在的国家或地区。</p></blockquote> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200621151917.png" alt="DNS域名解析--DNS服务器层次结构"></p> <p>从客户端到本地服务器属于递归查询，而DNS服务器之间的交互属于迭代查询。</p> <p>正常情况下，本地DNS服务器的缓存中已有comDNS服务器的地址，因此请求根域名服务器这一步不是必需的。</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200621151949.png" alt="DNS服务器的递归查询和迭代查询"></p> <blockquote><p>客户端收到你输入的域名地址后，它首先去找本地的hosts文件，检查在该文件中是否有相应的域名、IP对应关系，如果有，则向其IP地址发送请求，如果没有，再去找DNS服务器。一般用户很少去编辑修改hosts文件。</p></blockquote> <h3 id="_1-2-建立tcp链接（通过三次握手）"><a href="#_1-2-建立tcp链接（通过三次握手）" class="header-anchor">#</a> 1.2. 建立TCP链接（通过三次握手）</h3> <p>对于客户端与服务器的TCP链接，必然要说的就是『三次握手』。</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200621160602.png" alt="三次握手"></p> <ol><li>客户端发送一个TCP的SYN=1，Seq=X的包到服务器端口</li> <li>服务器发回SYN=1， ACK=X+1， Seq=Y的响应包</li> <li>客户端发送ACK=Y+1， Seq=Z</li></ol> <p>上图也可以这么理解：</p> <p>客户端：“你好，在家不，有你快递。”</p> <p>服务端：“在的，送来就行。”</p> <p>客户端：“好嘞。”</p> <p>客户端发送一个带有SYN标志的数据包给服务端，服务端收到后，回传一个带有SYN/ACK标志的数据包以示传达确认信息，最后客户端再回传一个带ACK标志的数据包，代表握手结束，连接成功。</p> <h3 id="_1-3-发送http请求"><a href="#_1-3-发送http请求" class="header-anchor">#</a> 1.3. 发送http请求</h3> <p>与服务器建立了连接后，就可以向服务器发起请求了。这里我们先看下请求报文的结构（如下图）：</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200621160901.png" alt="请求报文的结构"></p> <p>在浏览器中查看报文首部（以google浏览器为例）：</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200621161429.png" alt="报文首部"></p> <p>请求行包括请求方法、URI、HTTP版本。首部字段传递重要信息，包括请求首部字段、通用首部字段和实体首部字段。我们可以从报文中看到发出的请求的具体信息。具体每个首部字段的作用，这里不做过多阐述。</p> <h3 id="_1-4-服务器处理http请求"><a href="#_1-4-服务器处理http请求" class="header-anchor">#</a> 1.4. 服务器处理http请求</h3> <p>服务器端收到请求后的由web服务器（准确说应该是http服务器）处理请求，诸如Apache、Ngnix、IIS等。web服务器解析用户请求，知道了需要调度哪些资源文件，再通过相应的这些资源文件处理用户请求和参数，并调用数据库信息，最后将结果通过web服务器返回给浏览器客户端。</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200621161927.png" alt="服务器处理http请求"></p> <h3 id="_1-5-服务器返回响应结果"><a href="#_1-5-服务器返回响应结果" class="header-anchor">#</a> 1.5. 服务器返回响应结果</h3> <p>响应报文的组成结构：</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200621162018.png" alt="响应报文的组成结构"></p> <p>在响应结果中都会有个一个HTTP状态码，比如我们熟知的200、301、404、500等。通过这个状态码我们可以知道服务器端的处理是否正常，并能了解具体的错误。</p> <p>状态码由3位数字和原因短语组成。根据首位数字，状态码可以分为五类：</p> <table><thead><tr><th></th> <th>类别</th> <th>原因短语</th></tr></thead> <tbody><tr><td>1xx</td> <td>信息性状态码</td> <td>接收请求正在处理</td></tr> <tr><td>2xx</td> <td>成功状态码</td> <td>请求正常处理完毕</td></tr> <tr><td>3xx</td> <td>重定向状态码</td> <td>需要进行附加操作以完成请求</td></tr> <tr><td>4xx</td> <td>客户端错误状态码</td> <td>服务器无法处理请求</td></tr> <tr><td>5xx</td> <td>服务器错误状态码</td> <td>服务器处理请求出错</td></tr></tbody></table> <h3 id="_1-6-关闭tcp连接（通过四次挥手）"><a href="#_1-6-关闭tcp连接（通过四次挥手）" class="header-anchor">#</a> 1.6. 关闭TCP连接（通过四次挥手）</h3> <p>为了避免服务器与客户端双方的资源占用和损耗，当双方没有请求或响应传递时，任意一方都可以发起关闭请求。与创建TCP连接的3次握手类似，关闭TCP连接，需要4次握手。</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200621162920.png" alt="4次握手"></p> <p>上图可以这么理解：</p> <p>客户端：“兄弟，我这边没数据要传了，咱关闭连接吧。”</p> <p>服务端：“收到，我看看我这边有木有数据了。”</p> <p>服务端：“兄弟，我这边也没数据要传你了，咱可以关闭连接了。”</p> <p>客户端：“好嘞。”</p> <blockquote><p>浏览器与远程Web服务器通过TCP3次握手建立一个TCP/IP连接.该握手包括一个同步报文，一个同步-应答报文和一个应答报文，这3个报文在浏览器和服务器之间传递。该握手首先由客户端尝试建立起通信，而后服务器应答并接受客户端的请求，最后由客户端发出该请求已被接收的报文。<br>
一旦TCP/IP连接建立，浏览器会通过该链接向远程服务器发送HTTP的<strong>GET请求</strong>。远程服务器找到资源并使用HTTP响应返回该资源，值为200的HTTP响应状态表示一个正确的响应。
此时，Web服务器提供资源服务，客户端开始下载资源。</p></blockquote> <h2 id="_2-html页面解析渲染过程"><a href="#_2-html页面解析渲染过程" class="header-anchor">#</a> 2. HTML页面解析渲染过程</h2> <h3 id="_2-1-解析html文件，创建dom树"><a href="#_2-1-解析html文件，创建dom树" class="header-anchor">#</a> 2.1. 解析html文件，创建DOM树</h3> <p>自上而下解析，遇到任何样式（link、style）和脚本（script）都会阻塞</p> <p>1）css加载不会阻塞html文件的解析，但会阻塞dom的渲染</p> <p>2）css加载会阻塞后面js语句的执行</p> <p>3）js会阻塞html的解析和渲染，因为js有权利改变DOM结构，避免冲突从上到下执行</p> <p>4）没有defer和async标签的script会立即加载并执行</p> <p>5）有async标签的js，js的加载执行和html的解析和渲染并行</p> <p>6）有defer标签的js，js的加载和html的解析和渲染并行，但会在html解析完成后执行,在触发DOMContentLoaded事件前执行</p> <p>7）DOMContentLoaded和onload的区别：DOMContentLoaded在html解析完毕后执行，loload在页面完全加载完成后执行（包括样式和图片）</p> <blockquote><p>为什么要把CSS放在head中？
先加载默认，又加载样式，用户体验差，性能体验差
为什么要把script放在body最下面？
不会阻塞HTML结构渲染，可以拿到所有的HTML</p></blockquote> <p>构建过程：Bytes-&gt;Characters-&gt;Tokens-&gt;Nodes-&gt;Dom</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200621224616.png" alt="DOM TREE 构建过程"></p> <h3 id="_2-2-解析css，生成cssom，css对象模型"><a href="#_2-2-解析css，生成cssom，css对象模型" class="header-anchor">#</a> 2.2. 解析css，生成CSSOM，css对象模型</h3> <p>构建过程：Bytes-&gt;Characters-&gt;Tokens-&gt;Nodes-&gt;CSSOM</p> <p><img src="https://gitee.com/hello_hww/img/raw/master/img1/20200621224754.png" alt="CSS TREE 构建过程"></p> <h3 id="_2-3-dom和css合并，构建渲染树（render-tree）"><a href="#_2-3-dom和css合并，构建渲染树（render-tree）" class="header-anchor">#</a> 2.3. dom和css合并，构建渲染树（Render Tree）</h3> <p>1、过滤掉不可见节点(脚本标记、元标记)</p> <p>2、过滤掉样式隐藏的节点（display:none）</p> <h3 id="_2-4-布局（layout）和绘制（paint），重绘（repaint）和重排（reflow-回流）"><a href="#_2-4-布局（layout）和绘制（paint），重绘（repaint）和重排（reflow-回流）" class="header-anchor">#</a> 2.4. 布局（Layout）和绘制（Paint），重绘（repaint）和重排（reflow/回流）</h3> <p>布局，计算每个对象的精确位置和大小。</p> <p>绘制，使用最终渲染树将像素渲染到屏幕上。</p> <p>重绘：根据元素的新属性重新绘制，使元素呈现新的外观</p> <p>重排：当渲染树中的一部分因为元素的规模尺寸，布局，隐藏等改变而需要重新构建</p> <blockquote><p>重排必定会引发重绘，但重绘不一定会引发重排</p></blockquote> <div class="language-md line-numbers-mode"><pre class="language-md"><code>补充：
监听资源加载完成有四种方式
　　<span class="token list punctuation">1.</span> window.onload = function(){....}
　　<span class="token list punctuation">2.</span> window.addEventListener(&quot;load&quot;,function(){....});
　　<span class="token list punctuation">3.</span> document.body.onload = function(){....}
　　<span class="token list punctuation">4.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token attr-name">onload</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>load()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_3-从浏览器地址栏输入url到显示页面的步骤"><a href="#_3-从浏览器地址栏输入url到显示页面的步骤" class="header-anchor">#</a> 3. 从浏览器地址栏输入url到显示页面的步骤</h2> <p><strong>基础版本</strong></p> <ul><li>浏览器根据请求的 <code>URL</code>交给 <code>DNS</code>域名解析，找到真实 <code>IP</code>，向服务器发起请求；</li> <li>服务器交给后台处理完成后返回数据，浏览器接收文件（ <code>HTML&amp;#x3001;JS&amp;#x3001;CSS</code>、图象等）；</li> <li>浏览器对加载到的资源（ <code>HTML&amp;#x3001;JS&amp;#x3001;CSS</code>等）进行语法解析，建立相应的内部数据结构（如 <code>HTML</code>的 <code>DOM</code>）；</li> <li>载入解析到的资源文件，渲染页面，完成。</li></ul> <p><strong>详细版</strong></p> <ol><li>在浏览器地址栏输入URL</li> <li>浏览器查看 <strong>缓存</strong>，如果请求资源在缓存中并且新鲜，跳转到转码步骤</li> <li>如果资源未缓存，发起新请求</li> <li>如果已缓存，检验是否足够新鲜，足够新鲜直接提供给客户端，否则与服务器进行验证。</li> <li>检验新鲜通常有两个HTTP头进行控制 <code>Expires</code>和 <code>Cache-Control</code>：</li></ol> <div class="language- extra-class"><pre><code>+ HTTP1.0提供Expires，值为一个绝对时间表示缓存新鲜日期
+ HTTP1.1增加了Cache-Control: max-age=,值为以秒为单位的最大新鲜时间
</code></pre></div><ol start="3"><li>浏览器 <strong>解析URL</strong>获取协议，主机，端口，path</li> <li>浏览器 <strong>组装一个HTTP（GET）请求报文</strong></li> <li>浏览器 <strong>获取主机ip地址</strong>，过程如下：</li> <li>浏览器缓存</li> <li>本机缓存</li> <li>hosts文件</li> <li>路由器缓存</li> <li>ISP DNS缓存</li> <li>DNS递归查询（可能存在负载均衡导致每次IP不一样）</li> <li><strong>打开一个socket与目标IP地址，端口建立TCP链接</strong>，三次握手如下：</li> <li>客户端发送一个TCP的 <strong>SYN=1，Seq=X</strong>的包到服务器端口</li> <li>服务器发回 <strong>SYN=1， ACK=X+1， Seq=Y</strong>的响应包</li> <li>客户端发送 <strong>ACK=Y+1， Seq=Z</strong></li> <li>TCP链接建立后 <strong>发送HTTP请求</strong></li> <li>服务器接受请求并解析，将请求转发到服务程序，如虚拟主机使用HTTP Host头部判断请求的服务程序</li> <li>服务器检查 <strong>HTTP请求头是否包含缓存验证信息</strong>如果验证缓存新鲜，返回 <strong>304</strong>等对应状态码</li> <li>处理程序读取完整请求并准备HTTP响应，可能需要查询数据库等操作</li> <li>服务器将 <strong>响应报文通过TCP连接发送回浏览器</strong></li> <li>浏览器接收HTTP响应，然后根据情况选择 <strong>关闭TCP连接或者保留重用，关闭TCP连接的四次握手如下</strong>：</li> <li>主动方发送 <strong>Fin=1， Ack=Z， Seq= X</strong>报文</li> <li>被动方发送 <strong>ACK=X+1， Seq=Z</strong>报文</li> <li>被动方发送 <strong>Fin=1， ACK=X， Seq=Y</strong>报文</li> <li>主动方发送 <strong>ACK=Y， Seq=X</strong>报文</li> <li>浏览器检查响应状态吗：是否为1XX，3XX， 4XX， 5XX，这些情况处理与2XX不同</li> <li>如果资源可缓存， <strong>进行缓存</strong></li> <li>对响应进行 <strong>解码</strong>（例如gzip压缩）</li> <li>根据资源类型决定如何处理（假设资源为HTML文档）</li> <li><strong>解析HTML文档，构件DOM树，下载资源，构造CSSOM树，执行js脚本</strong>，这些操作没有严格的先后顺序，以下分别解释</li> <li><strong>构建DOM树</strong>：</li> <li><strong>Tokenizing</strong>：根据HTML规范将字符流解析为标记</li> <li><strong>Lexing</strong>：词法分析将标记转换为对象并定义属性和规则</li> <li><strong>DOM construction</strong>：根据HTML标记关系将对象组成DOM树</li> <li>解析过程中遇到图片、样式表、js文件， <strong>启动下载</strong></li> <li>构建 <strong>CSSOM树</strong>：</li> <li><strong>Tokenizing</strong>：字符流转换为标记流</li> <li><strong>Node</strong>：根据标记创建节点</li> <li><strong>CSSOM</strong>：节点创建CSSOM树</li> <li><strong><a href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/render-tree-construction" target="_blank" rel="https://dignified.cn">根据DOM树和CSSOM树构建渲染树<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong>:</li> <li>从DOM树的根节点遍历所有 <strong>可见节点</strong>，不可见节点包括：1） <code>script</code>, <code>meta</code>这样本身不可见的标签。2)被css隐藏的节点，如 <code>display: none</code></li> <li>对每一个可见节点，找到恰当的CSSOM规则并应用</li> <li>发布可视节点的内容和计算样式</li> <li><strong>js解析如下</strong>：</li> <li>浏览器创建Document对象并解析HTML，将解析到的元素和文本节点添加到文档中，此时 <strong>document.readystate为loading</strong></li> <li>HTML解析器遇到 <strong>没有async和defer的script时</strong>，将他们添加到文档中，然后执行行内或外部脚本。这些脚本会同步执行，并且在脚本下载和执行时解析器会暂停。这样就可以用document.write()把文本插入到输入流中。 <strong>同步脚本经常简单定义函数和注册事件处理程序，他们可以遍历和操作script和他们之前的文档内容</strong></li> <li>当解析器遇到设置了 <strong>async</strong>属性的script时，开始下载脚本并继续解析文档。脚本会在它 <strong>下载完成后尽快执行</strong>，但是 <strong>解析器不会停下来等它下载</strong>。异步脚本 <strong>禁止使用document.write()</strong>，它们可以访问自己script和之前的文档元素</li> <li>当文档完成解析，document.readState变成interactive</li> <li>所有 <strong>defer</strong>脚本会 <strong>按照在文档出现的顺序执行</strong>，延迟脚本 <strong>能访问完整文档树</strong>，禁止使用document.write()</li> <li>浏览器 <strong>在Document对象上触发DOMContentLoaded事件</strong></li> <li>此时文档完全解析完成，浏览器可能还在等待如图片等内容加载，等这些 <strong>内容完成载入并且所有异步脚本完成载入和执行</strong>，document.readState变为complete，window触发load事件</li> <li><strong>显示页面</strong>（HTML解析过程中会逐步显示页面）</li></ol> <p><strong>详细简版</strong></p> <ol><li>从浏览器接收 <code>url</code>到开启网络请求线程（这一部分可以展开浏览器的机制以及进程与线程之间的关系）</li> <li>开启网络线程到发出一个完整的 <code>HTTP</code>请求（这一部分涉及到dns查询， <code>TCP/IP</code>请求，五层因特网协议栈等知识）</li> <li>从服务器接收到请求到对应后台接收到请求（这一部分可能涉及到负载均衡，安全拦截以及后台内部的处理等等）</li> <li>后台和前台的 <code>HTTP</code>交互（这一部分包括 <code>HTTP</code>头部、响应码、报文结构、 <code>cookie</code>等知识，可以提下静态资源的 <code>cookie</code>优化，以及编码解码，如 <code>gzip</code>压缩等）</li> <li>单独拎出来的缓存问题， <code>HTTP</code>的缓存（这部分包括http缓存头部， <code>ETag</code>， <code>catch-control</code>等）</li> <li>浏览器接收到 <code>HTTP</code>数据包后的解析流程（解析 <code>html</code>-词法分析然后解析成 <code>dom</code>树、解析 <code>css</code>生成 <code>css</code>规则树、合并成 <code>render</code>树，然后 <code>layout</code>、 <code>painting</code>渲染、复合图层的合成、 <code>GPU</code>绘制、外链资源的处理、 <code>loaded</code>和 <code>DOMContentLoaded</code>等）</li> <li><code>CSS</code>的可视化格式模型（元素的渲染规则，如包含块，控制框， <code>BFC</code>， <code>IFC</code>等概念）</li> <li><code>JS</code>引擎解析过程（ <code>JS</code>的解释阶段，预处理阶段，执行阶段生成执行上下文， <code>VO</code>，作用域链、回收机制等等）</li> <li>其它（可以拓展不同的知识模块，如跨域，web安全， <code>hybrid</code>模式等等内容）</li></ol> <h2 id="_4-window-onload和domcontentloaded的区别"><a href="#_4-window-onload和domcontentloaded的区别" class="header-anchor">#</a> 4. window.onload和DOMContentLoaded的区别</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//页面的全部资源加载完才会执行，包括图片，视频</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//DOM 渲染完即可执行，此时图片，视频换坑能没有加载完成</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_5-加载资源的形式"><a href="#_5-加载资源的形式" class="header-anchor">#</a> 5. 加载资源的形式</h2> <p>输入url（或跳转页面）加载html</p> <div class="language-md line-numbers-mode"><pre class="language-md"><code>http://coding.m.imooc.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>加载html中的静态资源</p> <div class="language-md line-numbers-mode"><pre class="language-md"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/static/js/jquery.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_6-针对性优化"><a href="#_6-针对性优化" class="header-anchor">#</a> 6. 针对性优化</h2> <h3 id="_6-1-问题"><a href="#_6-1-问题" class="header-anchor">#</a> 6.1. 问题</h3> <p>白屏时间过长;h5浪费用户流量,用户体验差</p> <p>产生的原因：网络问题、关键渲染路径（CRP）问题</p> <h3 id="_6-2-怎么做优化"><a href="#_6-2-怎么做优化" class="header-anchor">#</a> 6.2. 怎么做优化</h3> <p>如何做好优化呢，网上随便一搜，就有很多优化总结，无非就是网络优化、静态资源（html、js、css、image）优化。下面我们撇开网络方面的优化，只分析静态资源方面的优化。而静态资源的优化关键在于你要去深入理解<code>关键渲染路径（CRP）</code>的运行原理和规则。</p> <p>使用一些工具，帮助我们去评估现有页面的CRP(关键渲染路径)性能。</p> <blockquote><p>测试工具：Lighthouse 可以快速测试你的网页，并提供性能报告
监控工具：Nivigation Timing Api 设置你的代码，实时监控用户使用过程中的性能。</p></blockquote> <p>javascript阻止DOM构建（ DOMContentLoaded触发被延迟），css的下载和完成阻止javascript的执行。在没有javascript或者只含有异步javascript的页面中，DOM的构建和CSSOM的构建互不影响。</p> <p>以下是优化方案：</p> <div class="language-md line-numbers-mode"><pre class="language-md"><code>1、降低请求数量
    a、减少获取数据的接口数（初始数据尽量通过一个接口返回）
    b、减少js、css的数量（提取公共js、css利用缓存、减少后续加载访问。有些代码直接注入页面无需外链形式访问加载。）
    c、图片懒加载
2、降低文件大小
    a、图片压缩以及使用webp
    b、压缩js、css
    c、gzip（设置content-encoding:gzip）
    d、icon或者svg绘制图标
3、加快请求速度
    a、DNS预解析
    b、减少域名数量(页面、js、css、image、接口域名、同种类型文本请求尽量同域名。)
    c、静态资源cdn分发
    d、提前加载（提前加载一部分可能被用户访问的图片或者数据信息）
4、缓存
    a、http协议缓存
    b、离线数据缓存localStorage
5、渲染
    a、js、css优化(按照规范来写)
    b、服务器渲染
    c、能异步加载的js要异步加载
    d、js不要修改dom和css，避免重绘
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><blockquote><p>DNS预解析 <a href="https://developer.mozilla.org/zh-CN/docs/Controlling_DNS_prefetching" target="_blank" rel="https://dignified.cn">https://developer.mozilla.org/zh-CN/docs/Controlling_DNS_prefetching<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
google规范 <a href="https://google.github.io/styleguide/jsguide.html#guide-notes" target="_blank" rel="https://dignified.cn">https://google.github.io/styleguide/jsguide.html#guide-notes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h2 id="_7-参考文章"><a href="#_7-参考文章" class="header-anchor">#</a> 7. 参考文章</h2> <p>“天龙八步”细说浏览器输入URL后发生了什么
<a href="https://www.xuecaijie.com/it/157.html#1Q64dG0mJ2gKFF" target="_blank" rel="https://dignified.cn">https://www.xuecaijie.com/it/157.html#1Q64dG0mJ2gKFF<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>页面渲染过程解析
<a href="https://segmentfault.com/a/1190000015019450#item-2-3" target="_blank" rel="https://dignified.cn">https://segmentfault.com/a/1190000015019450#item-2-3<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>前端性能优化知识点汇总
<a href="https://segmentfault.com/a/1190000013363147" target="_blank" rel="https://dignified.cn">https://segmentfault.com/a/1190000013363147<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="gitalk-container"><div id="gitalk-container"></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/09计算机网络和浏览器/5.http1.x、https和2.0的区别.html" class="prev">
        5.http1.x、https和2.0的区别.md
      </a></span> <span class="next"><a href="/09计算机网络和浏览器/X.计算机网络和浏览器相关面试题.html">
        X.计算机网络和浏览器相关面试题
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7cfd3afd.js" defer></script><script src="/assets/js/2.7c2e0a4d.js" defer></script><script src="/assets/js/72.dbab8cc7.js" defer></script><script src="/assets/js/5.bf8043b7.js" defer></script>
  </body>
</html>
